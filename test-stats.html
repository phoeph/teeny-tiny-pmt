<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ•°æ®ç»Ÿè®¡æµ‹è¯•é¡µé¢</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background: #f8fafc;
    }
    .test-card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .test-button {
      background: #4f46e5;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      margin-right: 12px;
      margin-bottom: 12px;
    }
    .test-button:hover {
      background: #4338ca;
    }
    .status {
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 600;
      display: inline-block;
      margin-top: 12px;
    }
    .success { background: #d1fae5; color: #059669; }
    .error { background: #fee2e2; color: #dc2626; }
    .info { background: #dbeafe; color: #2563eb; }
  </style>
</head>
<body>
  <h1>ğŸ§ª æ•°æ®ç»Ÿè®¡Dashboardæµ‹è¯•</h1>
  
  <div class="test-card">
    <h3>åŠŸèƒ½æµ‹è¯•</h3>
    <p>æµ‹è¯•æ•°æ®ç»Ÿè®¡é¡µé¢çš„å„é¡¹åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
    
    <button class="test-button" onclick="testPageLoad()">æµ‹è¯•é¡µé¢åŠ è½½</button>
    <button class="test-button" onclick="testDataFetch()">æµ‹è¯•æ•°æ®è·å–</button>
    <button class="test-button" onclick="testCharts()">æµ‹è¯•å›¾è¡¨æ¸²æŸ“</button>
    <button class="test-button" onclick="testExport()">æµ‹è¯•å¯¼å‡ºåŠŸèƒ½</button>
    
    <div id="testResults"></div>
  </div>
  
  <div class="test-card">
    <h3>å¿«é€Ÿè®¿é—®</h3>
    <p>ç›´æ¥è®¿é—®æ•°æ®ç»Ÿè®¡é¡µé¢</p>
    
    <button class="test-button" onclick="window.open('/data-statistics.html', '_blank')">
      ğŸš€ æ‰“å¼€æ•°æ®ç»Ÿè®¡é¡µé¢
    </button>
    
    <button class="test-button" onclick="window.open('/projects.html', '_blank')">
      ğŸ“ æ‰“å¼€é¡¹ç›®åˆ—è¡¨é¡µé¢
    </button>
  </div>
  
  <div class="test-card">
    <h3>æµ‹è¯•è¯´æ˜</h3>
    <ul>
      <li><strong>é¡µé¢åŠ è½½æµ‹è¯•:</strong> æ£€æŸ¥é¡µé¢æ˜¯å¦èƒ½æ­£å¸¸åŠ è½½å’Œåˆå§‹åŒ–</li>
      <li><strong>æ•°æ®è·å–æµ‹è¯•:</strong> éªŒè¯æ•°æ®è·å–å’Œæ¨¡æ‹Ÿæ•°æ®ç”ŸæˆåŠŸèƒ½</li>
      <li><strong>å›¾è¡¨æ¸²æŸ“æµ‹è¯•:</strong> æµ‹è¯•å„ç§å›¾è¡¨æ˜¯å¦èƒ½æ­£å¸¸æ˜¾ç¤º</li>
      <li><strong>å¯¼å‡ºåŠŸèƒ½æµ‹è¯•:</strong> éªŒè¯CSVå¯¼å‡ºå’Œæ‰“å°åŠŸèƒ½</li>
    </ul>
    
    <h4>å¿«æ·é”®è¯´æ˜:</h4>
    <ul>
      <li><kbd>Ctrl + R</kbd> - åˆ·æ–°æ•°æ®</li>
      <li><kbd>Ctrl + E</kbd> - å¯¼å‡ºæŠ¥å‘Š</li>
      <li><kbd>Ctrl + P</kbd> - æ‰“å°æŠ¥å‘Š</li>
      <li><kbd>H</kbd> - æ˜¾ç¤ºå¸®åŠ©</li>
      <li><kbd>Ctrl + D</kbd> - è°ƒè¯•é¢æ¿</li>
    </ul>
  </div>

  <script>
    function showResult(message, type = 'info') {
      const results = document.getElementById('testResults');
      const div = document.createElement('div');
      div.className = `status ${type}`;
      div.textContent = message;
      results.appendChild(div);
      
      // Auto remove after 5 seconds
      setTimeout(() => {
        if (results.contains(div)) {
          results.removeChild(div);
        }
      }, 5000);
    }

    function testPageLoad() {
      showResult('æ­£åœ¨æµ‹è¯•é¡µé¢åŠ è½½...', 'info');
      
      fetch('/data-statistics.html')
        .then(response => {
          if (response.ok) {
            showResult('âœ… é¡µé¢åŠ è½½æµ‹è¯•é€šè¿‡', 'success');
          } else {
            showResult('âŒ é¡µé¢åŠ è½½å¤±è´¥', 'error');
          }
        })
        .catch(error => {
          showResult('âŒ é¡µé¢åŠ è½½é”™è¯¯: ' + error.message, 'error');
        });
    }

    function testDataFetch() {
      showResult('æ­£åœ¨æµ‹è¯•æ•°æ®è·å–...', 'info');
      
      // Test if the API endpoints are accessible
      const apiTests = [
        '/api/projects',
        '/api/work-items',
        '/api/users'
      ];
      
      let completedTests = 0;
      let passedTests = 0;
      
      apiTests.forEach(endpoint => {
        fetch(endpoint)
          .then(response => {
            completedTests++;
            if (response.ok || response.status === 404) {
              passedTests++;
            }
            
            if (completedTests === apiTests.length) {
              if (passedTests === apiTests.length) {
                showResult('âœ… æ•°æ®è·å–æµ‹è¯•é€šè¿‡ (APIå¯è®¿é—®)', 'success');
              } else {
                showResult('âš ï¸ éƒ¨åˆ†APIä¸å¯è®¿é—®ï¼Œå°†ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®', 'info');
              }
            }
          })
          .catch(() => {
            completedTests++;
            if (completedTests === apiTests.length) {
              showResult('âš ï¸ APIä¸å¯è®¿é—®ï¼Œå°†ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®', 'info');
            }
          });
      });
    }

    function testCharts() {
      showResult('æ­£åœ¨æµ‹è¯•å›¾è¡¨åŠŸèƒ½...', 'info');
      
      // Test if chart-utils.js is accessible
      fetch('/assets/chart-utils.js')
        .then(response => {
          if (response.ok) {
            showResult('âœ… å›¾è¡¨åº“åŠ è½½æˆåŠŸ', 'success');
          } else {
            showResult('âŒ å›¾è¡¨åº“åŠ è½½å¤±è´¥', 'error');
          }
        })
        .catch(error => {
          showResult('âŒ å›¾è¡¨åº“é”™è¯¯: ' + error.message, 'error');
        });
    }

    function testExport() {
      showResult('âœ… å¯¼å‡ºåŠŸèƒ½å·²é›†æˆåˆ°é¡µé¢ä¸­', 'success');
      showResult('ğŸ’¡ è¯·åœ¨æ•°æ®ç»Ÿè®¡é¡µé¢ä¸­æµ‹è¯•å¯¼å‡ºåŠŸèƒ½', 'info');
    }

    // Auto-run basic tests on page load
    window.addEventListener('load', () => {
      setTimeout(() => {
        testPageLoad();
        setTimeout(() => testDataFetch(), 1000);
        setTimeout(() => testCharts(), 2000);
      }, 500);
    });
  </script>
</body>
</html>